<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.0.0">Jekyll</generator><link href="https://bjxx.ltd/feed.xml" rel="self" type="application/atom+xml" /><link href="https://bjxx.ltd/" rel="alternate" type="text/html" /><updated>2020-03-11T00:13:14-05:00</updated><id>https://bjxx.ltd/feed.xml</id><title type="html">BjChacha</title><subtitle>随便写点东西</subtitle><entry><title type="html">使用PlaidML进行GPU模型训练</title><link href="https://bjxx.ltd/plaidml/ai/2020/02/25/plaidml-keras-ai.html" rel="alternate" type="text/html" title="使用PlaidML进行GPU模型训练" /><published>2020-02-25T00:00:00-06:00</published><updated>2020-02-25T00:00:00-06:00</updated><id>https://bjxx.ltd/plaidml/ai/2020/02/25/plaidml-keras-ai</id><content type="html" xml:base="https://bjxx.ltd/plaidml/ai/2020/02/25/plaidml-keras-ai.html">&lt;!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2020-02-25-plaidml-keras-ai.ipynb
--&gt;

&lt;div class=&quot;container&quot; id=&quot;notebook-container&quot;&gt;
        
    
    
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;

&lt;/div&gt;
    

&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h2 id=&quot;&amp;#20851;&amp;#20110;PlaidML&quot;&gt;&amp;#20851;&amp;#20110;PlaidML&lt;a class=&quot;anchor-link&quot; href=&quot;#&amp;#20851;&amp;#20110;PlaidML&quot;&gt; &lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/plaidml/plaidml&quot;&gt;PlaidML&lt;/a&gt;是Intel的一个AI开发工具，目前支持Keras, ONNX,nGraph。&lt;br /&gt;
现在大火的Tensorflow和PyTorch只支持Nvidia的CUDA进行GPU加速计算。&lt;br /&gt;
而PlaidML可使用OpenCL进行加速。虽然AMD有自己的加速运算平台&lt;a href=&quot;https://rocm.github.io/&quot;&gt;ROCm&lt;/a&gt;，但目前不支持windows系统，而且OpenCL在速度上貌似还比不上CUDA，对A卡Windows用户（就是我）来说但总比没有的好。&lt;/p&gt;
&lt;p&gt;本文使用的机器主要配置如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;E3 1230 v2&lt;/li&gt;
&lt;li&gt;RX 480&lt;/li&gt;
&lt;li&gt;DDR3 1333 4G x2&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下面从安装到跑模型，来试试PlaidML的效果如何。&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h2 id=&quot;&amp;#23433;&amp;#35013;PlaidML&quot;&gt;&amp;#23433;&amp;#35013;PlaidML&lt;a class=&quot;anchor-link&quot; href=&quot;#&amp;#23433;&amp;#35013;PlaidML&quot;&gt; &lt;/a&gt;&lt;/h2&gt;&lt;p&gt;使用pip安装PlaidML:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;pip instal plaidml-keras&lt;br /&gt;
plaidml-setup&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;根据提示设置PlaidML。&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h2 id=&quot;&amp;#20351;&amp;#29992;PlaidML&amp;#35757;&amp;#32451;Fashion-MNIST&amp;#20998;&amp;#31867;&amp;#22120;&quot;&gt;&amp;#20351;&amp;#29992;PlaidML&amp;#35757;&amp;#32451;Fashion-MNIST&amp;#20998;&amp;#31867;&amp;#22120;&lt;a class=&quot;anchor-link&quot; href=&quot;#&amp;#20351;&amp;#29992;PlaidML&amp;#35757;&amp;#32451;Fashion-MNIST&amp;#20998;&amp;#31867;&amp;#22120;&quot;&gt; &lt;/a&gt;&lt;/h2&gt;&lt;p&gt;首先用tensorflow中的keras跑一下，看看要跑多久。&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;details class=&quot;description&quot; open=&quot;&quot;&gt;
      &lt;summary class=&quot;btn btn-sm&quot; data-open=&quot;Hide Code&quot; data-close=&quot;Show Code&quot;&gt;&lt;/summary&gt;
        &lt;p&gt;&lt;div class=&quot;input&quot;&gt;

&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython3&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# collapse_show&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 使用tensorflow.keras(cpu)训练&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;tensorflow&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;tf&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;time&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;datasets&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fashion_mnist&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;x_train&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x_train&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;astype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;float32&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reshape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;255.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x_test&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x_test&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;astype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;float32&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reshape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;255.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# print(x_train.shape)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sequential&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Conv2D&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;filters&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kernel_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;same&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;activation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;relu&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;input_shape&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MaxPool2D&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pool_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Dropout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Conv2D&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;filters&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kernel_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;same&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;activation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;relu&amp;#39;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MaxPool2D&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pool_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Dropout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Flatten&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Dense&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;units&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;256&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;activation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;relu&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Dropout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Dense&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;units&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;activation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;softmax&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;optimizer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;adam&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;n&quot;&gt;loss&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;losses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sparse_categorical_crossentropy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;metrics&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;accuracy&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;train_start&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;batch_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;epochs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;train_end&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;accuracy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;evaluate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;training time cost: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{0:.1f}&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt; s, accuracy: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{1:.4f}&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train_end&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train_start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;accuracy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

    &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/p&gt;
    &lt;/details&gt;
&lt;div class=&quot;output_wrapper&quot;&gt;
&lt;div class=&quot;output&quot;&gt;

&lt;div class=&quot;output_area&quot;&gt;

&lt;div class=&quot;output_subarea output_stream output_stdout output_text&quot;&gt;
&lt;pre&gt;Train on 60000 samples
Epoch 1/10
60000/60000 [==============================] - 46s 769us/sample - loss: 0.5855 - accuracy: 0.7840
Epoch 2/10
60000/60000 [==============================] - 46s 758us/sample - loss: 0.4013 - accuracy: 0.8541
Epoch 3/10
60000/60000 [==============================] - 46s 762us/sample - loss: 0.3586 - accuracy: 0.8695
Epoch 4/10
60000/60000 [==============================] - 47s 777us/sample - loss: 0.3357 - accuracy: 0.8769
Epoch 5/10
60000/60000 [==============================] - 47s 778us/sample - loss: 0.3172 - accuracy: 0.8826
Epoch 6/10
60000/60000 [==============================] - 44s 736us/sample - loss: 0.3010 - accuracy: 0.8888
Epoch 7/10
60000/60000 [==============================] - 44s 735us/sample - loss: 0.2867 - accuracy: 0.8940
Epoch 8/10
60000/60000 [==============================] - 44s 736us/sample - loss: 0.2781 - accuracy: 0.8974
Epoch 9/10
60000/60000 [==============================] - 44s 737us/sample - loss: 0.2697 - accuracy: 0.9013
Epoch 10/10
60000/60000 [==============================] - 44s 735us/sample - loss: 0.2631 - accuracy: 0.9033
10000/10000 [==============================] - 2s 201us/sample - loss: 0.2369 - accuracy: 0.9120
training time cost: 451.5 s, accuracy: 0.91
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
    

&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;p&gt;现在轮到本文的主角plaidml，展现真正的技术了&lt;del&gt;（不是&lt;/del&gt;
&lt;div class=&quot;flash&quot;&gt;
    &lt;svg class=&quot;octicon octicon-info&quot; viewBox=&quot;0 0 14 16&quot; version=&quot;1.1&quot; width=&quot;14&quot; height=&quot;16&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M6.3 5.69a.942.942 0 01-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 01-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;
    &lt;strong&gt;Note: &lt;/strong&gt;plaidml和tensorflow都有keras，不同的是使用的后端。因此要将keras的后端切换到plaidml，才能确保plaidml正确运行。  
&lt;/div&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;details class=&quot;description&quot; open=&quot;&quot;&gt;
      &lt;summary class=&quot;btn btn-sm&quot; data-open=&quot;Hide Code&quot; data-close=&quot;Show Code&quot;&gt;&lt;/summary&gt;
        &lt;p&gt;&lt;div class=&quot;input&quot;&gt;

&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython3&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# collapse_show&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 更改keras后端&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;plaidml.keras&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plaidml&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;install_backend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;environ&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;KERAS_BACKEND&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;plaidml.keras.backend&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

    &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/p&gt;
    &lt;/details&gt;
&lt;/div&gt;
    

&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;p&gt;&lt;div class=&quot;flash flash-success&quot;&gt;
    &lt;svg class=&quot;octicon octicon-checklist&quot; viewBox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; width=&quot;16&quot; height=&quot;16&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M16 8.5l-6 6-3-3L8.5 10l1.5 1.5L14.5 7 16 8.5zM5.7 12.2l.8.8H2c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h7c.55 0 1 .45 1 1v6.5l-.8-.8c-.39-.39-1.03-.39-1.42 0L5.7 10.8a.996.996 0 000 1.41v-.01zM4 4h5V3H4v1zm0 2h5V5H4v1zm0 2h3V7H4v1zM3 9H2v1h1V9zm0-2H2v1h1V7zm0-2H2v1h1V5zm0-2H2v1h1V3z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;
    &lt;strong&gt;Tip: &lt;/strong&gt;如果不想每次都运行上述代码，可在&lt;code&gt;%USERPROFILE%\.keras\keras.json&lt;/code&gt;配置文件中的&lt;code&gt;&quot;backend&quot;&lt;/code&gt;设为 &lt;code&gt;&quot;plaidml.keras.backend&quot;&lt;/code&gt;.
&lt;/div&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;details class=&quot;description&quot; open=&quot;&quot;&gt;
      &lt;summary class=&quot;btn btn-sm&quot; data-open=&quot;Hide Code&quot; data-close=&quot;Show Code&quot;&gt;&lt;/summary&gt;
        &lt;p&gt;&lt;div class=&quot;input&quot;&gt;

&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython3&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# collapse_show&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 使用plaidml.keras(gpu) 训练&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;keras&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;time&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;datasets&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fashion_mnist&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x_train&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x_train&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;astype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;float32&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reshape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x_test&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x_test&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;astype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;float32&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reshape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sequential&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Conv2D&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;filters&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kernel_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;same&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;activation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;relu&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;input_shape&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MaxPool2D&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pool_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Dropout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Conv2D&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;filters&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kernel_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;same&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;activation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;relu&amp;#39;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MaxPool2D&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pool_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Dropout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Flatten&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Dense&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;units&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;256&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;activation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;relu&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Dropout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Dense&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;units&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;activation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;softmax&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;optimizer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;adam&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;n&quot;&gt;loss&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keras&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;losses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sparse_categorical_crossentropy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;metrics&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;accuracy&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;train_start&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;batch_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;epochs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;train_end&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;accuracy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;evaluate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;training time cost: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{0:.1f}&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt; s, accuracy: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{1}&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train_end&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train_start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;accuracy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

    &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/p&gt;
    &lt;/details&gt;
&lt;div class=&quot;output_wrapper&quot;&gt;
&lt;div class=&quot;output&quot;&gt;

&lt;div class=&quot;output_area&quot;&gt;

&lt;div class=&quot;output_subarea output_stream output_stderr output_text&quot;&gt;
&lt;pre&gt;Using plaidml.keras.backend backend.
INFO:plaidml:Opening device &amp;#34;opencl_amd_ellesmere.0&amp;#34;
Epoch 1/10
60000/60000 [==============================] - 22s 374us/step - loss: 1.1562 - acc: 0.7010
Epoch 2/10
60000/60000 [==============================] - 12s 193us/step - loss: 0.5358 - acc: 0.8014
Epoch 3/10
60000/60000 [==============================] - 12s 195us/step - loss: 0.4548 - acc: 0.8316
Epoch 4/10
60000/60000 [==============================] - 12s 197us/step - loss: 0.4207 - acc: 0.8457
Epoch 5/10
60000/60000 [==============================] - 11s 185us/step - loss: 0.3989 - acc: 0.8551
Epoch 6/10
60000/60000 [==============================] - 11s 186us/step - loss: 0.3773 - acc: 0.8625
Epoch 7/10
60000/60000 [==============================] - 11s 185us/step - loss: 0.3664 - acc: 0.8651
Epoch 8/10
60000/60000 [==============================] - 11s 187us/step - loss: 0.3551 - acc: 0.8713
Epoch 9/10
60000/60000 [==============================] - 11s 184us/step - loss: 0.3425 - acc: 0.8758
Epoch 10/10
60000/60000 [==============================] - 11s 183us/step - loss: 0.3355 - acc: 0.8763
10000/10000 [==============================] - 5s 473us/step
training time cost: 124.2 s, accuracy: 0.8858
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
    

&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;p&gt;通过上面两次训练对比看到，CPU训练需要451秒，而通过PlaidML使用GPU训练则只需124秒，大概缩短了1/3的时间，效果还是很明显的。&lt;br /&gt;
综上，PlaidML适合没有N卡但坚守Windows，以及MacBook Pro的用户。但有条件还是搞一台N卡主机吧，&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h2 id=&quot;&amp;#30058;&amp;#22806;&amp;#65306;&amp;#20026;&amp;#20160;&amp;#20040;&amp;#19981;&amp;#38382;&amp;#38382;&amp;#31070;&amp;#22855;&amp;#30340;Colab&amp;#21602;&amp;#65311;&quot;&gt;&amp;#30058;&amp;#22806;&amp;#65306;&amp;#20026;&amp;#20160;&amp;#20040;&amp;#19981;&amp;#38382;&amp;#38382;&amp;#31070;&amp;#22855;&amp;#30340;Colab&amp;#21602;&amp;#65311;&lt;a class=&quot;anchor-link&quot; href=&quot;#&amp;#30058;&amp;#22806;&amp;#65306;&amp;#20026;&amp;#20160;&amp;#20040;&amp;#19981;&amp;#38382;&amp;#38382;&amp;#31070;&amp;#22855;&amp;#30340;Colab&amp;#21602;&amp;#65311;&quot;&gt; &lt;/a&gt;&lt;/h2&gt;&lt;p&gt;不试不知道，试了才知道。上面代码在使用了GPU的Colab下跑，结果输出：&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;training time cost: 50.0 s, accuracy: 0.9147
最后知道真相的我眼泪流下来，手上PlaidML突然就不香了。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</content><author><name></name></author><summary type="html"></summary></entry><entry><title type="html">VSCode用于cpp调试的相关设置</title><link href="https://bjxx.ltd/vscode/2020/01/28/vscode-cpp-setting.html" rel="alternate" type="text/html" title="VSCode用于cpp调试的相关设置" /><published>2020-01-28T00:00:00-06:00</published><updated>2020-01-28T00:00:00-06:00</updated><id>https://bjxx.ltd/vscode/2020/01/28/vscode-cpp-setting</id><content type="html" xml:base="https://bjxx.ltd/vscode/2020/01/28/vscode-cpp-setting.html">&lt;h2 id=&quot;0-前言&quot;&gt;0. 前言&lt;/h2&gt;

&lt;p&gt;由于对Cpp的需求比较轻量，用来学习语法和写写算法题之类的，用&lt;code class=&quot;highlighter-rouge&quot;&gt;visual studio&lt;/code&gt;觉得十分臃肿。&lt;code class=&quot;highlighter-rouge&quot;&gt;vscode&lt;/code&gt;是一款非常优秀的代码编辑器，本身不具备任何编译器等IDE功能。需要进行一定的环境准备才能用&lt;code class=&quot;highlighter-rouge&quot;&gt;vscode&lt;/code&gt;进行Cpp代码的编译和调试。&lt;/p&gt;

&lt;h2 id=&quot;1-gcc编译器安装&quot;&gt;1. GCC编译器安装&lt;/h2&gt;

&lt;p&gt;1.下载&lt;a href=&quot;https://sourceforge.net/projects/mingw-w64/files/&quot;&gt;MinGW-w64&lt;/a&gt;，选择最新版本的&lt;strong&gt;x86_64-posix-seh&lt;/strong&gt;。  &lt;br /&gt;
2.解压下载下来的压缩包，并将&lt;code class=&quot;highlighter-rouge&quot;&gt;mingw64&lt;/code&gt;文件夹移动到C盘根目录下（当然也可以到其他地方）。&lt;br /&gt;
3.将&lt;code class=&quot;highlighter-rouge&quot;&gt;mingw64&lt;/code&gt;文件夹下的&lt;code class=&quot;highlighter-rouge&quot;&gt;bin&lt;/code&gt;文件夹目录添加到用户环境变量中的&lt;code class=&quot;highlighter-rouge&quot;&gt;PATH&lt;/code&gt;中。此例中则将&lt;code class=&quot;highlighter-rouge&quot;&gt;C:\mingw64\bin&lt;/code&gt;添加到PATH中。&lt;br /&gt;
4.验证gcc编译器安装是否成功：&lt;strong&gt;Win+R&lt;/strong&gt;运行cmd，输入gcc，若提示&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;gcc:fatal error: no input files&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;则gcc编译器安装成功；若提示：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;不是内部命令或外部命令&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;则gcc没有安装成功，回头检查环境变量中&lt;code class=&quot;highlighter-rouge&quot;&gt;PATH&lt;/code&gt;中的目录与gcc实际目录是否符合。&lt;/p&gt;

&lt;h2 id=&quot;2-vscode-cpp相关插件&quot;&gt;2. vscode cpp相关插件&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;C/C++：提供Cpp Debug等功能。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;3-vscode-相关配置文件&quot;&gt;3. vscode 相关配置文件&lt;/h2&gt;

&lt;p&gt;在&lt;code class=&quot;highlighter-rouge&quot;&gt;vscode&lt;/code&gt;打开Cpp工作区后，会在当前目录下自动生成&lt;code class=&quot;highlighter-rouge&quot;&gt;.vscode&lt;/code&gt;文件夹。该文件夹下存放当前工作区的以下配置文件。若无以下文件可自行创建。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;em&gt;launch.json&lt;/em&gt;&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  {
      &quot;version&quot;: &quot;0.2.0&quot;,
      &quot;configurations&quot;: [
        
          {
              &quot;name&quot;: &quot;(gdb) Launch&quot;,
              &quot;type&quot;: &quot;cppdbg&quot;,
              &quot;request&quot;: &quot;launch&quot;,
              &quot;program&quot;: &quot;${fileDirname}/${fileBasenameNoExtension}.exe&quot;,
              &quot;args&quot;: [],
              &quot;stopAtEntry&quot;: false,
              &quot;cwd&quot;: &quot;${workspaceFolder}&quot;,
              &quot;environment&quot;: [],
              &quot;externalConsole&quot;: true,
              &quot;internalConsoleOptions&quot;: &quot;neverOpen&quot;,
              &quot;MIMode&quot;: &quot;gdb&quot;,
              &quot;miDebuggerPath&quot;: &quot;gdb.exe&quot;,
              &quot;setupCommands&quot;: [
                  {
                      &quot;description&quot;: &quot;Enable pretty-printing for gdb&quot;,
                      &quot;text&quot;: &quot;-enable-pretty-printing&quot;,
                      &quot;ignoreFailures&quot;: false
                  }
              ],
              &quot;preLaunchTask&quot;: &quot;Compile&quot;,
          }
      ]
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;em&gt;task.json&lt;/em&gt;&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  {
      &quot;version&quot;: &quot;2.0.0&quot;,
      &quot;tasks&quot;: [
          {
              &quot;label&quot;: &quot;Compile&quot;,
              &quot;command&quot;: &quot;g++&quot;,
              &quot;args&quot;: [
                  &quot;${file}&quot;,
                  &quot;-o&quot;,
                  &quot;${fileDirname}/${fileBasenameNoExtension}.exe&quot;,
                  &quot;-g&quot;,
                  &quot;-Wall&quot;,
                  &quot;-static-libgcc&quot;,
                  &quot;-fexec-charset=GBK&quot;
              ],
              &quot;type&quot;: &quot;process&quot;,
              &quot;group&quot;: {
                  &quot;kind&quot;: &quot;build&quot;,
                  &quot;isDefault&quot;: true
              },
              &quot;presentation&quot;: {
                  &quot;echo&quot;: true,
                  &quot;reveal&quot;: &quot;always&quot;,
                  &quot;focus&quot;: false,
                  &quot;panel&quot;: &quot;shared&quot;,
              },
          }
      ]
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;em&gt;setting.json&lt;/em&gt; (部分)&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  {
      ...
      &quot;files.defaultLanguage&quot;: &quot;cpp&quot;,
      &quot;editor.formatOnType&quot;: true,
      &quot;editor.suggest.snippetsPreventQuickSuggestions&quot;: false,
      &quot;editor.acceptSuggestionOnEnter&quot;: &quot;off&quot;,
      &quot;editor.snippetSuggestions&quot;: &quot;top&quot;,
      &quot;code-runner.runInTerminal&quot;: true,
      &quot;code-runner.executorMap&quot;: {
          &quot;c&quot;: &quot;cd $dir &amp;amp;&amp;amp; gcc '$fileName' -o '$fileNameWithoutExt.exe' -Wall -g -O2 -static-libgcc -std=c11 -fexec-charset=GBK &amp;amp;&amp;amp; &amp;amp;'$dir$fileNameWithoutExt'&quot;,
          &quot;cpp&quot;: &quot;cd $dir &amp;amp;&amp;amp; g++ '$fileName' -o '$fileNameWithoutExt.exe' -Wall -g -O2 -static-libgcc -std=c++17 -fexec-charset=GBK &amp;amp;&amp;amp; &amp;amp;'$dir$fileNameWithoutExt'&quot;
      },
      &quot;code-runner.saveFileBeforeRun&quot;: true,
      &quot;code-runner.preserveFocus&quot;: true,
      &quot;code-runner.clearPreviousOutput&quot;: false,
      &quot;code-runner.ignoreSelection&quot;: true,
      &quot;C_Cpp.clang_format_sortIncludes&quot;: true,
      ...
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;4-用vscode进行cpp调试&quot;&gt;4. 用vscode进行cpp调试&lt;/h2&gt;
&lt;p&gt;1.在任意目录下创建文件夹&lt;code class=&quot;highlighter-rouge&quot;&gt;cpp&lt;/code&gt;。   &lt;br /&gt;
2.在&lt;code class=&quot;highlighter-rouge&quot;&gt;vscode&lt;/code&gt;下&lt;code class=&quot;highlighter-rouge&quot;&gt;Ctrl+K&lt;/code&gt;、&lt;code class=&quot;highlighter-rouge&quot;&gt;Ctrl+O&lt;/code&gt;，打开&lt;code class=&quot;highlighter-rouge&quot;&gt;cpp&lt;/code&gt;文件夹。 &lt;br /&gt;
3.&lt;code class=&quot;highlighter-rouge&quot;&gt;Ctrl+N&lt;/code&gt;创建新文件，随便写个cpp demo:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
using namespace std;

int main()
{
    cout &amp;lt;&amp;lt; &quot;hello world&quot; &amp;lt;&amp;lt; endl;
    int a;
    cin &amp;gt;&amp;gt; a;
    return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;4.&lt;code class=&quot;highlighter-rouge&quot;&gt;Shift+Ctrl+B&lt;/code&gt;进行编译；&lt;code class=&quot;highlighter-rouge&quot;&gt;F5&lt;/code&gt;进行调试，会弹出命令行窗口显示&lt;code class=&quot;highlighter-rouge&quot;&gt;hello world&lt;/code&gt;输出。至此完成所有设置。&lt;/p&gt;

&lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.zhihu.com/question/30315894&quot;&gt;知乎&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://code.visualstudio.com/docs/cpp/config-mingw&quot;&gt;vscode官方文档&lt;/a&gt;&lt;/p&gt;</content><author><name>BjChacha</name></author><summary type="html">0. 前言</summary></entry><entry><title type="html">精灵宝可梦 动画食用方式</title><link href="https://bjxx.ltd/vscode/2019/07/14/%E7%B2%BE%E7%81%B5%E5%AE%9D%E5%8F%AF%E6%A2%A6TV&%E5%89%A7%E5%9C%BA%E7%89%88%E8%A7%82%E7%9C%8B%E9%A1%BA%E5%BA%8F.html" rel="alternate" type="text/html" title="精灵宝可梦 动画食用方式" /><published>2019-07-14T00:00:00-05:00</published><updated>2019-07-14T00:00:00-05:00</updated><id>https://bjxx.ltd/vscode/2019/07/14/%E7%B2%BE%E7%81%B5%E5%AE%9D%E5%8F%AF%E6%A2%A6TV&amp;%E5%89%A7%E5%9C%BA%E7%89%88%E8%A7%82%E7%9C%8B%E9%A1%BA%E5%BA%8F</id><content type="html" xml:base="https://bjxx.ltd/vscode/2019/07/14/%E7%B2%BE%E7%81%B5%E5%AE%9D%E5%8F%AF%E6%A2%A6TV&amp;%E5%89%A7%E5%9C%BA%E7%89%88%E8%A7%82%E7%9C%8B%E9%A1%BA%E5%BA%8F.html">&lt;h2 id=&quot;前言&quot;&gt;前言&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;自用，不包括特别篇和其他小剧场。&lt;/li&gt;
  &lt;li&gt;tv也就图个响，正宗还得看漫画特别篇（滑稽&lt;/li&gt;
  &lt;li&gt;摘自&lt;a href=&quot;https://www.zhihu.com/question/40409084&quot;&gt;知乎&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;无印篇epop&quot;&gt;&lt;strong&gt;&lt;a href=&quot;https://www.bilibili.com/bangumi/play/ep97641&quot;&gt;无印篇（EP,OP）&lt;/a&gt;&lt;/strong&gt;&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;石英联盟：&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;001（神奇宝贝，就决定是你了！）——054（警犬卡蒂狗）&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：超梦的逆袭&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;055（按快门的机会是皮卡丘）——080（神奇宝贝联盟最后的战斗）&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;橘子群岛：&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;081（真新镇，新的开始）——104（皮卡丘对抗喵喵）&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：梦幻之宝可梦 洛奇亚爆诞&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;105（喷火龙，就决定是你了！）——116（宿敌大对决，小茂对抗小智）&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;城都联盟：&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;117（若叶镇，吹起开启之风的城镇）——155（圈圈熊，吓死人）&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：结晶塔的帝王&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;156（麒麟奇，超能力神奇宝贝之村）——205（变隐龙在哪里？看不见的神奇宝贝，大混乱！）&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：雪拉比 穿梭时空的相遇&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;206（讨厌水系神奇宝贝的乔伊！小霞的愤怒！）——256（龙宫道馆，在水中战斗）&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：水都的守护神 拉帝亚斯与拉帝欧斯&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;257（乘龙之歌！）——274（与皮卡丘分手）&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;超世代ag&quot;&gt;&lt;strong&gt;&lt;a href=&quot;https://www.bilibili.com/bangumi/play/ss6161&quot;&gt;超世代（AG）&lt;/a&gt;&lt;/strong&gt;&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;丰缘联盟：&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;001（新的大地！新的冒险！！）——034（最初拿到的宝可梦，大混乱！）&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：七夜的许愿星 基拉祈&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;035（小遥！初次挑战宝可梦华丽大赛！）——085（茵郁道馆！天空之战！）&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：裂空的访问者 代欧奇希斯&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;086（喷火驼载着电影来！）——134（月见山！皮宝宝与皮皮与皮可西！）&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：梦幻与波导的勇者 路卡利欧&lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;对战开拓区：&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;135（初阵！对战工厂！！（前篇））——183（长尾怪手与国王！）&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：宝可梦保育家与苍海的王子 玛纳霏&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;184（聒噪鸟与宝可梦相声！）——192（旅程的终点，以及旅程的开始！）&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;钻石与珍珠神奥联盟dp&quot;&gt;&lt;strong&gt;&lt;a href=&quot;https://www.bilibili.com/bangumi/play/ss6162&quot;&gt;钻石与珍珠：神奥联盟（DP）&lt;/a&gt;&lt;/strong&gt;&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;001（出发！双叶镇到真砂镇！）——039（皮卡丘留守记！）&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：决战时空之塔 帝牙卢卡VS帕路奇犽VS达克莱伊&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;040（冠军·竹兰登场！）——086（缘之时装大会！通往宝可梦风格设计师之路！！）&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：骑拉帝纳与冰空的花束 洁咪&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;087（路霸可达鸭！）——135（全员参战！宝可梦大胜利！！）&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：阿尔宙斯 超克的时空&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;136（天冠山的遗迹！银河队的阴谋！！）——183（开幕！神奥联盟・铃兰大会！！）&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：幻影的霸者 索罗亚克&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;184（神奥联盟第三轮！真司对阿驯！！）——191（回忆是珍珠！友情是钻石！！）&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;超级愿望bw&quot;&gt;&lt;strong&gt;&lt;a href=&quot;https://www.bilibili.com/bangumi/play/ss6164&quot;&gt;超级愿望（BW）&lt;/a&gt;&lt;/strong&gt;&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;合众联盟：&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;001（前往合众地方！捷克罗姆的身影！！）——039（全体集合！东·乔治对战！！）&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：比克提尼与黑英雄 捷克罗姆&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：比克提尼与白英雄 雷希拉姆&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;040（激战东·乔治对战！藤藤蛇VS驹刀小兵！！）——084（激战立涌道馆！VS霍米加！！（后篇））&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;东合众：&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;085（歌唱吧，美洛耶塔！爱的旋律！！）——087（大岩蛇岛野外求生！！）&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：酋雷姆VS圣剑士 凯路迪欧&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;088（酒侍侦探天桐！消失的喷嚏熊之谜！！）——108（决战合众联盟！皮卡丘对路卡利欧！！）&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;N章：&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;109（红豆杉研究所！展开新旅行！！）——122（莱希拉姆对N！理想和真实的那一方!!）&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Da！章：&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;123（再见了合众！新的乘船之旅！！）——133（光之飞碟！大宇怪之城！！）&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：神速的盖诺赛克特 超梦觉醒&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;134（三色堇登场！伞电蜥与坐骑山羊!!）——144（艾莉丝VS小椿！通往龙系大师之路!!）&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;xy系列&quot;&gt;&lt;strong&gt;XY系列&lt;/strong&gt;&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;[XY]: (https://www.bilibili.com/bangumi/play/ss5762)&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;001（抵达卡洛斯地方！梦想与冒险的开始!!）——034（森林拳王！摔角鹰人登场!!）&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：破坏之茧与蒂安希&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;035（空中对战!?摔角鹰人对烈箭鹰!!）——081（穿越时空的小智！洛托姆的心愿！）&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：光轮的超魔神 胡帕&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;082（南瓜怪人变装庆典！再见了，南瓜精!?）——093（百刻道馆的双打对战！葛吉花的先知!!）&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.bilibili.com/bangumi/play/ss5692&quot;&gt;XY&amp;amp;Z&lt;/a&gt;&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;094（Z爆炸诞生！卡洛斯的潜伏者!!）——126（超级蜥蜴王对雷丘！我要学到许多的经验!!）&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：波尔凯尼恩与机关人偶玛机雅娜&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;127（全面对战的准决赛！小智对翔太!!）——142（最强的二人！希特隆与天桐!!）&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;太阳月亮&quot;&gt;&lt;strong&gt;&lt;a href=&quot;https://www.bilibili.com/bangumi/play/ss5707&quot;&gt;太阳&amp;amp;月亮&lt;/a&gt;&lt;/strong&gt;&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;001（阿罗拉！最初的岛屿、最初的宝可梦们!!）——033（厉害的池塘霸主弱丁鱼！）&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦:就决定是你了!&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;034（火焰对战！嘎啦嘎啦现身!!）——081（阿罗拉新的火焰！皇家小智诞生!!）&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;剧场版：精灵宝可梦：大家的物语&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;082（跳舞，跳舞进化吗？）——至今&lt;/li&gt;
  &lt;li&gt;待续……&lt;/li&gt;
&lt;/ul&gt;</content><author><name>BjChacha</name></author><summary type="html">前言 自用，不包括特别篇和其他小剧场。 tv也就图个响，正宗还得看漫画特别篇（滑稽 摘自知乎</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://bjxx.ltd/images/posts/pm_logo.png" /><media:content medium="image" url="https://bjxx.ltd/images/posts/pm_logo.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Windows 个人软件收藏集</title><link href="https://bjxx.ltd/collections/2018/04/30/windows-great-software-collections.html" rel="alternate" type="text/html" title="Windows 个人软件收藏集" /><published>2018-04-30T00:00:00-05:00</published><updated>2018-04-30T00:00:00-05:00</updated><id>https://bjxx.ltd/collections/2018/04/30/windows-great-software-collections</id><content type="html" xml:base="https://bjxx.ltd/collections/2018/04/30/windows-great-software-collections.html">&lt;h2 id=&quot;sumatra-pdf&quot;&gt;&lt;a href=&quot;https://www.sumatrapdfreader.org/free-pdf-reader.html&quot;&gt;Sumatra PDF&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/sumatrapdfreader/sumatrapdf&quot;&gt;开源&lt;/a&gt;的轻量级PDF阅读器&lt;/li&gt;
  &lt;li&gt;适合追求轻量PDF阅读体验的用户&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;calibre&quot;&gt;&lt;a href=&quot;https://calibre-ebook.com/&quot;&gt;Calibre&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;本地电子书管理工具&lt;/li&gt;
  &lt;li&gt;适合有kindle或者喜欢看电子书的用户&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;motrix&quot;&gt;&lt;a href=&quot;https://motrix.app/&quot;&gt;Motrix&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/agalwood/Motrix&quot;&gt;开源&lt;/a&gt;、跨平台的下载工具&lt;/li&gt;
  &lt;li&gt;支持下载 HTTP、FTP、BT、磁力链、百度网盘等资源&lt;/li&gt;
  &lt;li&gt;界面简洁&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;rufus&quot;&gt;&lt;a href=&quot;https://rufus.ie/&quot;&gt;Rufus&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/pbatard/rufus&quot;&gt;开源&lt;/a&gt;的可引导USB盘创建工具&lt;/li&gt;
  &lt;li&gt;支持多种系统镜像&lt;/li&gt;
  &lt;li&gt;速度很快&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;office-tool-pro--lite&quot;&gt;&lt;a href=&quot;https://otp.landian.vip/zh-cn/&quot;&gt;Office Tool Pro &amp;amp; Lite&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;免费的Office快速部署工具&lt;/li&gt;
  &lt;li&gt;一键下载、安装、激活各种版本Office&lt;/li&gt;
  &lt;li&gt;KMS地址：上网找吧挺多的&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;quicklook&quot;&gt;&lt;a href=&quot;https://www.microsoft.com/zh-cn/p/quicklook/9nv4bs3l1h4s?activetab=pivot:overviewtab&quot;&gt;QuickLook&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;按空格就可以预览文件内容&lt;/li&gt;
  &lt;li&gt;支持大多数格式文件，包括文本、图片、视频、压缩文件等&lt;/li&gt;
  &lt;li&gt;快！方便！&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;listary&quot;&gt;&lt;a href=&quot;https://www.listary.com/&quot;&gt;Listary&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;文件检索系统+启动器&lt;/li&gt;
  &lt;li&gt;支持快捷键启动，启动速度快，搜索速度一流&lt;/li&gt;
  &lt;li&gt;支持常用操作命令，比如百度搜索等&lt;/li&gt;
  &lt;li&gt;免费够用&lt;/li&gt;
  &lt;li&gt;还有很多强大的功能&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;待续……&lt;/p&gt;</content><author><name>BjChacha</name></author><summary type="html">Sumatra PDF 开源的轻量级PDF阅读器 适合追求轻量PDF阅读体验的用户</summary></entry><entry><title type="html">在Ubuntu快速部署Django</title><link href="https://bjxx.ltd/django/2018/04/30/ubuntu-django-deployment.html" rel="alternate" type="text/html" title="在Ubuntu快速部署Django" /><published>2018-04-30T00:00:00-05:00</published><updated>2018-04-30T00:00:00-05:00</updated><id>https://bjxx.ltd/django/2018/04/30/ubuntu-django-deployment</id><content type="html" xml:base="https://bjxx.ltd/django/2018/04/30/ubuntu-django-deployment.html">&lt;h2 id=&quot;配置环境&quot;&gt;配置环境&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Ubuntu 16.04-64bit&lt;/li&gt;
  &lt;li&gt;Python 3.5&lt;/li&gt;
  &lt;li&gt;Django 2.0.4&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;第零步-部署准备工作&quot;&gt;&lt;strong&gt;第零步 部署准备工作&lt;/strong&gt;&lt;/h2&gt;

&lt;p&gt;编写&lt;code class=&quot;highlighter-rouge&quot;&gt;requirements.txt&lt;/code&gt;文件(根据自身情况编写)&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Django==2.0.4
django-pagedown==1.0.4
Markdown==2.6.11
Pygments==2.2.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;关闭项目的&lt;code class=&quot;highlighter-rouge&quot;&gt;DEBUG&lt;/code&gt;模式&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;/mysite/mysite/settings.py&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;...
DEBUG = True					# 关闭DEBUG模式

ALLOWED_HOSTS = ['*']			# 允许访问的域名，'*'表示允许所有

LANGUAGE_CODE = 'en_us'			# Ubuntu中Django不包含中文语言包

TIME_ZONE = 'Asia/Shanghai'		# 修改时区
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;本示例项目名字为&lt;code class=&quot;highlighter-rouge&quot;&gt;mysite&lt;/code&gt;,后面内容请根据自身情况修改&lt;br /&gt;
然后把项目和&lt;code class=&quot;highlighter-rouge&quot;&gt;requirements.txt&lt;/code&gt;上传到服务器&lt;br /&gt;
将项目放在&lt;code class=&quot;highlighter-rouge&quot;&gt;/home&lt;/code&gt;,即项目目录为&lt;code class=&quot;highlighter-rouge&quot;&gt;/home/mysite&lt;/code&gt;(即&lt;code class=&quot;highlighter-rouge&quot;&gt;manage.py&lt;/code&gt;文件所在目录)&lt;/p&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;第一步-更新系统&quot;&gt;&lt;strong&gt;第一步 更新系统&lt;/strong&gt;&lt;/h2&gt;
&lt;blockquote&gt;
  &lt;p&gt;sudo apt-get update&lt;br /&gt;
sudo apt-get upgrade&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;第二步可选-安装python36&quot;&gt;&lt;strong&gt;第二步(可选) 安装Python3.6&lt;/strong&gt;&lt;/h2&gt;
&lt;blockquote&gt;
  &lt;p&gt;sudo apt-get install build-essential checkinstall&lt;br /&gt;
sudo apt-get install libreadline-gplv2-dev libncursesw5-dev libssl-dev libsqlite3-dev tk-dev libgdbm-dev libc6-dev libbz2-dev&lt;br /&gt;
cd /etc/&lt;br /&gt;
wget https://www.python.org/ftp/python/3.6.4/Python-3.6.4.tgz&lt;br /&gt;
sudo tar xzf Python-3.6.4.tgz&lt;br /&gt;
cd Python-3.6.4&lt;br /&gt;
sudo ./configure&lt;br /&gt;
sudo make altinstall&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;可选最后进入root简化后面的部分操作&quot;&gt;(可选)最后，进入&lt;code class=&quot;highlighter-rouge&quot;&gt;root&lt;/code&gt;，简化后面的部分操作&lt;/h2&gt;
&lt;h2 id=&quot;第三步-安装项目依赖项&quot;&gt;&lt;strong&gt;第三步 安装项目依赖项&lt;/strong&gt;&lt;/h2&gt;
&lt;blockquote&gt;
  &lt;p&gt;pip3 install -r requirements.txt&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;第四步-项目在服务器中初始化&quot;&gt;&lt;strong&gt;第四步 项目在服务器中初始化&lt;/strong&gt;&lt;/h2&gt;
&lt;blockquote&gt;
  &lt;p&gt;python manage.py makemigrations&lt;br /&gt;
python manage.py migrate&lt;br /&gt;
python manage.py createsuperuser # 若数据库中已有管理员账号则可跳过&lt;br /&gt;
python manage.py collectstatic&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;测试&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;python manage.py runserver 0.0.0.0:80&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;访问公网ip，能显示项目内容，但可能无法显示静态文件内容&lt;br /&gt;
杀掉80端口&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;fuser -k 80/tcp&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;第五步-安装uwsgi&quot;&gt;&lt;strong&gt;第五步 安装uWSGI&lt;/strong&gt;&lt;/h2&gt;
&lt;blockquote&gt;
  &lt;p&gt;pip3 install uwsgi&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;测试&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;uwsgi –http :80  –chdir /home/mysite/ -w mysite.wsgi&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;访问公网ip，访问正常则退出并继续&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;mkdir -p /etc/uwsgi/sites&lt;br /&gt;
cd /etc/uwsgi/sites&lt;br /&gt;
nano mysite.ini&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;输入以下内容&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[uwsgi]
project = mysite
base = /home

chdir = %(base)/%(project)
module = %(project).wsgi:application

master = true
processes = 5

socket = %(base)/%(project)/%(project).sock
chmod-socket = 666
vacuum = true
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;第六步-安装nginx&quot;&gt;&lt;strong&gt;第六步 安装Nginx&lt;/strong&gt;&lt;/h2&gt;
&lt;blockquote&gt;
  &lt;p&gt;apt-get install nginx&lt;br /&gt;
nano /etc/nginx/sites-available/mysite&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;输入以下内容&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;server {
	
	listen 80;
	server_name yourdomain.com;

	location /static/ {
		root /home/mysite;
		}
	location / {
		include         uwsgi_params;
		uwsgi_pass      unix:/home/mysite/mysite.sock;
		}
	}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;其中&lt;code class=&quot;highlighter-rouge&quot;&gt;yourdomain.com&lt;/code&gt;改成自己的域名(假设已经完成解析设置)&lt;/p&gt;

&lt;p&gt;链接文件并检测nginx服务器&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;ln -s /etc/nginx/sites-available/mysite /etc/nginx/sites-enabled/&lt;br /&gt;
service nginx configtest&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;(可能需要)删除nginx默认模板&lt;/p&gt;
&lt;blockquote&gt;
  &lt;h2 id=&quot;rm--r-etcnginxsites-availabledefault&quot;&gt;rm -r /etc/nginx/sites-available/default&lt;/h2&gt;
  &lt;h2 id=&quot;第七步-启动服务&quot;&gt;&lt;strong&gt;第七步 启动服务&lt;/strong&gt;&lt;/h2&gt;
  &lt;p&gt;service nginx restart&lt;br /&gt;
uwsgi /etc/uwsgi/sites/mysite.ini -d /home/mysite/mysite.log&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;访问域名，能够正常访问，静态文件也能正常显示&lt;/p&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;最终步-欢呼吧&quot;&gt;&lt;strong&gt;最终步 欢呼吧！&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.jianshu.com/p/d6f9138fab7b&quot;&gt;来源&lt;/a&gt;&lt;/p&gt;</content><author><name>BjChacha</name></author><summary type="html">配置环境 Ubuntu 16.04-64bit Python 3.5 Django 2.0.4</summary></entry></feed>